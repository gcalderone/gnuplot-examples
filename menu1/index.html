<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="/libs/katex/katex.min.css">
     
   <link rel="stylesheet" href="/libs/highlight/github.min.css">
   
  <link rel="stylesheet" href="/css/franklin.css">
  <link rel="stylesheet" href="/css/minimal-mistakes.css">
  <link rel="stylesheet" href="/css/adjust.css">
  <!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
  <![endif]-->
  <!-- start custom head snippets -->
  <link rel="icon" href="/assets/favicon.png">
   <title>Code blocks</title>  
  <!-- insert favicons. use https://realfavicongenerator.net/ -->
  <!-- end custom head snippets -->
</head>
<body class="layout--single">
  <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="/">@gp & @gsp</a>
        <ul class="visible-links">
         <!-- <li class="masthead__menu-item"><a href="/franklin/" >Franklin</a></li> -->
          <li class="masthead__menu-item"><a href="/menu1/" >2D plots</a></li>
          <li class="masthead__menu-item"><a href="/menu2/" >3D plots</a></li>
          <li class="masthead__menu-item"><a href="/menu3/">Feature</a></li>
        </ul>
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

  <div class="initial-content">
    <div id="main" role="main">
      <div class="sidebar sticky">
        <div itemscope itemtype="https://schema.org/Person">
          <!--
          <div class="author__avatar">
            <img src="/assets/minimal-mistakes/zenobia.png" alt="Septimia Zenobia" itemprop="image">
          </div>
          -->
          <!--
          <div class="author__content">
            <h3 class="author__name" itemprop="name">Lazaro Alonso</h3>
            <p class="author__bio" itemprop="description">Probably not a commoner.</p>
          </div>
          -->
          <div class="author__urls-wrapper">
            <button class="btn btn--inverse">Follow</button>
            <ul class="author__urls social-icons">
              <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
                <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Tierra</span></li>
              <li><a href="https://twitter.com/LazarusAlon" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
              <li><a href="https://github.com/gcalderone/Gnuplot.jl" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
            </ul>
          </div>
        </div>
      </div>

<!-- Content appended here -->

<div class="franklin-content">
<h1 id="gp_macro_for_plotting"><a href="#gp_macro_for_plotting">@gp macro for plotting</a></h1>  <div class="franklin-toc"><ol><li><a href="#gp_macro_for_plotting">@gp macro for plotting</a><ol><li><a href="#simple_plots">Simple plots</a></li><li><a href="#full_customize_plot">Full customize plot</a></li><li><a href="#default_colors_with_lines">Default colors with lines</a></li><li><a href="#black_background_and_colormaps">Black background, and colormaps</a></li><li><a href="#color_as_a_third_dimension">Color as a third dimension</a></li><li><a href="#several_colormaps_and_layout">Several colormaps and layout </a></li></ol></li><li><a href="#scatter_plots">Scatter plots  </a><ol><li><a href="#simple_scatter_plot">simple scatter plot </a></li><li><a href="#full_customize_scatter_plot">Full customize scatter plot</a></li><li><a href="#color_as_a_third_dimension__2">Color as a third dimension</a></li></ol></li></ol></div>  <h2 id="simple_plots"><a href="#simple_plots">Simple plots</a></h2>  The simplest plot  can be generated and save it with</p>
<pre><code class="language-julia">using Gnuplot
@gp 1:10
#save("plt2_ex1.gp")
#save(term="cairolatex standalone", output="plt2_ex1.tex")
#save(term="pdf", output="plt2_ex1.pdf")
save(term="png", output="plt2_ex1.png")</code></pre> <img src="/assets/menu1/code/plt2_ex1.png" alt="">
<p>Here, we are plotting 10 values, from 1 to 10 and the default is to plot <em>points</em>.  We can change this by calling <strong>with</strong> within a string and specifying the kind of plot that we want, i.e., <strong>lines</strong>.  Additionally, the <strong>legend &#40;label&#41;</strong> for this plot can be called afterwards with <strong>title</strong> as well as the <strong>line color</strong>.  Namely, <code> &quot;with lines title &#39;sin&#39; linecolor &#39;black&#39;&quot;</code>  &#40; <code> &quot;w l t &#39;sin&#39; lc &#39;black&#39;&quot;</code>,  also works&#33;&#41;. See the next example.  </p>
<p>Also, several options to save to a file are posible.  The usuals <code>pdf</code> and <code>png</code> can be used as in the example above. Another two options that may come in handy are </p>
<blockquote>
<code>file.gp</code>, which you can load directly afterwards in <code>gnuplot</code>  with </p>
</blockquote>
<ul>
<li><p><code>gnuplot&gt; load &#39;file.gp&#39;</code></p>
</li>
</ul>
<p>and </p>
<blockquote>
<code>file.tex</code> in which case you can include directly math-latex style equation and load afterwards in a Latex document. More on this in <strong>advance examples</strong>. </p>
</blockquote>
<pre><code class="language-julia">using Gnuplot
t = 0:0.001:1
@gp(t, sin.(2π*5*t), "with lines title 'sin' linecolor 'black'")</code></pre> <img src="/assets/menu1/code/plt2_ex2.png" alt="">
<p>Also, we can plot more than one line as  in</p>
<pre><code class="language-julia">using Gnuplot
x = -2π:0.001:2π
@gp(x, sin.(x), "w l t 'sin'", "set yrange [-1.1:1.1]", "set grid",
    x, cos.(x), "with linespoints ls 1 t 'cos' ",
    "set style line 1 lc rgb 'black' lt 1 lw 1 pt 6 pi -200 ps 1.5")</code></pre> <img src="/assets/menu1/code/plt2_ex3.png" alt="">
<p>where the <strong>yrange</strong> as well as a <strong>grid</strong> are called with <strong>set</strong>.  The <code>xrange</code> and <code>yrange</code> can be called directly into the plot. Also, another way to add a new plot to a previuos one is done by using <code>:-</code>  after <code>@gp</code>. Namely, </p>
<pre><code class="language-julia">using Gnuplot
x = -2π:0.001:2π
@gp(x, sin.(x),"w l t 'sin' lw 2 lc '#56B4E9'", "set grid", 
    xrange = (-2π - 0.3, 2π + 0.3), yrange = (-1.1,1.1))
@gp(:-, x, cos.(x), "w l t 'cos' lw 2 lc rgb '#E69F00'")</code></pre> <img src="/assets/menu1/code/plt2_ex4.png" alt="">
<p>Note that the <code>linewidth</code> can also be called directly and a custom color can also be called, <code>lc &#39;hex&#39;</code>.  <h2 id="full_customize_plot"><a href="#full_customize_plot">Full customize plot</a></h2>  More customization, as the  <code>title</code> of the graph,  <code>xlabel</code> ,  <code>ylabel</code>  and legend&#40;label&#41; position can be done as follows:  </p>
<pre><code class="language-julia">using Gnuplot
x = -2π:0.001:2π
@gp(x, sin.(x), "w l t 'sin' lw 2 lc '#56B4E9'", "set grid", 
    "set auto fix",
    "set offsets graph .05, graph .05, graph .05, graph .05",
    ylabel="Y label", xlabel="X label", title = "Title",
    "set key bottom left font ',12' title 'Legend' box 2",)
@gp(:-, x, cos.(x), "w l t 'cos' lw 1.5 dashtype 2 lc '#E69F00'")</code></pre> <img src="/assets/menu1/code/plt2_ex5.png" alt="">
<p>note that the <code>legend&#40;label&#41;</code> is specified with <code>&quot;set key bottom left ...&quot;</code>, here besides the usual options <code>top lef</code>,  <code>top right</code>, etc., you can also write directly the <code>x,y</code> coordinates as  <code>&quot;set key at 1,-0.6&quot;</code> for example.  </p>
<p>The <code>&quot;set auto fix&quot;</code>, and <code>&quot;set offsets graph ...</code> are used to have a proper centered figure.  Note also the new <code>dashtype</code> option also called <code>dt</code>. More on that in the following.   </p>
<p>A set of dash styles is also available. See the next figure.  <pre><code class="language-julia">using Gnuplot
x = -2π:0.001:2π
linCol = ["#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442"]
@gp(x, cos.(x), "w l t 'dt 1' lw 2 dt 1 lc '$(linCol[1])'",
    "set grid", "set auto fix",
    "set offsets graph .05, graph .05, graph .05, graph .05",
    ylabel="Y label", xlab="X label",
    "set key b r font ',10' title 'dashtype' opaque")
for (idx,ϕ) in enumerate(0.3:0.3:1.3)
    @gp(:-, x, cos.(x .+ 2ϕ),
    "w l t 'dt $(idx+1)' lw 2 dt $(idx+1) lc '$(linCol[idx+1])'")
end</code></pre> <img src="/assets/menu1/code/plt2_ex6.png" alt="">
<p>Note how easy is to incorporate normal <code>Julia</code> code, i.e. <code>Strings</code> into <code>Gnuplot</code> commands.  Now, also the legend <code>set key bottom right... opaque</code> is used to have a rectangle with white background.   <h2 id="default_colors_with_lines"><a href="#default_colors_with_lines">Default colors with lines</a></h2>  <pre><code class="language-julia">using Gnuplot
ecycl_x(r,k,θ) = r*(k .+ 1).*cos.(θ) .- r*cos.((k .+ 1) .* θ)
ecycl_y(r,k,θ) = r*(k .+ 1).*sin.(θ) .- r*sin.((k .+ 1) .* θ)
θ = LinRange(0,6.2π,1000)
@gp(ecycl_x(1,1,θ), ecycl_y(1,1,θ), "w l lw 2 t '1'",
    "set size square")
for k in 2:0.5:5.
    @gp(:-, ecycl_x(2k,k,θ), ecycl_y(2k,k,θ), "w l lw 2 t '$(k)' ", 
        "set key outside title 'k, r=2k' box opaque",
        xlabel = "x(θ) = r(k+1)cos(θ) -rcos((k+1)θ)", 
        ylabel = "y(θ) = r(k+1)cos(θ) -rcos((k+1)θ) ",
        title = "Epicycloid",:-)
end
@gp</code></pre> <img src="/assets/menu1/code/plt2_ex6dot1.png" alt="">
<h2 id="black_background_and_colormaps"><a href="#black_background_and_colormaps">Black background, and colormaps</a></h2>  For a more cumbersome example, consider the following with a <code>black</code> background and colors from <code>ColorSchemes</code>. </p>
<pre><code class="language-julia">using Gnuplot, ColorSchemes
x = -2π:0.001:2π
function circShape(h,k,r)
    θ = LinRange(0,2π,500)
    h .+ r*sin.(θ), k .+ r*cos.(θ)
end
bgcp1 = "set object rectangle from screen 0,0 to screen 1,1"
bgcp2 = " behind fillcolor rgb 'black' fillstyle solid noborder"
bgcolor = bgcp1*bgcp2
cmap = get(colorschemes[:viridis], LinRange(0,1,15))
@gp " " :-  # this is just to reset session
@gp(circShape(0,0,1)..., "w l lw 2 lc '#$(hex(cmap[3]))'", 
    "set key off", "set auto fix",  "set size square",
    "set offsets graph .05, graph .05, graph .05, graph .05",
    "set border lw 1 lc rgb 'white'",
    "set ylabel 'y' textcolor rgb 'white'",
    "set xlabel 'x' textcolor rgb 'white'",
    "set xzeroaxis linetype 3 linewidth 1",
    "set yzeroaxis linetype 3 linewidth 1",
    bgcolor)
for (indx,r) in enumerate(0.9:-0.1:0.1)
    @gp(:-, circShape(0,0,r)..., "w l lw 2 lc '#$(hex(cmap[indx+3]))'",
    "set key off")
end</code></pre> <img src="/assets/menu1/code/plt2_ex7.png" alt=""> <h2 id="color_as_a_third_dimension"><a href="#color_as_a_third_dimension">Color as a third dimension</a></h2>  Using as reference the previous example we can use any <code>colormap</code> in  <code>Gnuplot</code>&#39;s <code>palettes</code> as a way to enconde a third dimension. </p>
<pre><code class="language-julia">using Gnuplot, Colors, ColorSchemes
x = LinRange(-2π,2π,200)
@gp(x, -0.65sin.(3x), x,  "w l lw 3 dt 1 lc palette", 
    "set key off", "set auto fix")</code></pre> <img src="/assets/menu1/code/plt_ex8.png" alt="">
<p>Here, the default colormap is used. However, if we want more customize colormaps with can use the following definition to call all posible palettes in <code>ColorSchemes</code>.  <h2 id="several_colormaps_and_layout"><a href="#several_colormaps_and_layout">Several colormaps and layout </a></h2>
<pre><code class="language-julia">using Gnuplot, Colors, ColorSchemes, Random
Random.seed!(123)
function custom_palette(colormap=:viridis)
    cmap = get(colorschemes[colormap], LinRange(0,1,256))
    ctmp = "0 '#$(hex(cmap[1]))',"
    for i in 2:256; ctmp = ctmp*"$(i-1) '#$(hex(cmap[i]))'," end;
    "set palette defined("*ctmp[1:end-1]*")"
end
# Archimedes spiral
a = 1.5
b = -2.4
t = LinRange(0,5*π,500)
x = (a .+ b*t) .* cos.(t)
y = (a .+ b*t) .* sin.(t)
@gp " " :-  # this is just to reset session
@gp :- "set multiplot layout 3,3; set key off; 
    unset ytics; unset xtics; unset border" :-
colormaps = [:magma, :viridis, :plasma, :inferno, :berlin, 
    :leonardo, :devon, :spring, :ice]
for i in 1:9
    @gp :- i title = "$(colormaps[i])" "set size square" :-
    @gp(:-, x, y, t, "w l lw 3 dt 1 lc palette", 
        custom_palette(colormaps[i]),"set cbtics out nomirror", :-)
end
@gp</code></pre> <img src="/assets/menu1/code/plt_ex9.png" alt="">
<h1 id="scatter_plots"><a href="#scatter_plots">Scatter plots  </a></h1>  Just for the sake of completeness, let&#39;s see several colormaps but this time for different kinds of <strong>point types</strong>, <code>pt</code>. </p>
<h2 id="simple_scatter_plot"><a href="#simple_scatter_plot">simple scatter plot </a></h2>  <pre><code class="language-julia">using Gnuplot, Random
Random.seed!(123)
goffset = "set offsets graph .05, graph .05, graph .05, graph .05"
@gp rand(30) rand(30) "w p pt 4 ps 3 lc '#0072B2' lw 2 t 'marker'" goffset</code></pre> <img src="/assets/menu1/code/plt_ex10.png" alt="">
<p>So, what&#39;s happening here?. Well, basically we have <code>x</code> and <code>y</code> coordinates, here <code>rand&#40;30&#41;</code> and <code>rand&#40;30&#41;</code>, then the corresponding options are specified, i.e.  <code> with points pointtype 4 pointsize 3 linecolor &#39;#0072B2&#39; linewidth 2 title &#39;marker&#39;</code>. All in a single line&#33;</p>
<h2 id="full_customize_scatter_plot"><a href="#full_customize_scatter_plot">Full customize scatter plot</a></h2>  <pre><code class="language-julia">using Gnuplot, Random
Random.seed!(123)
goffset = "set offsets graph .05, graph .05, graph .05, graph .05"
@gp(rand(30), rand(30), "w p pt 6 ps 2 lc '#D55E00' lw 2 t 'marker'",
    goffset, title = "scatter plot", xlabel ="X", ylabel = "Y",
    "set key b l box opaque")</code></pre> <img src="/assets/menu1/code/plt_ex11.png" alt="">
<h2 id="color_as_a_third_dimension__2"><a href="#color_as_a_third_dimension__2">Color as a third dimension</a></h2>  <pre><code class="language-julia">using Gnuplot, Colors, ColorSchemes, Random
Random.seed!(123)
function custom_palette(colormap=:viridis)
    cmap = get(colorschemes[colormap], LinRange(0,1,256))
    ctmp = "0 '#$(hex(cmap[1]))',"
    for i in 2:256; ctmp = ctmp*"$(i-1) '#$(hex(cmap[i]))'," end;
    "set palette defined("*ctmp[1:end-1]*")"
end
@gp " " :-  # this is just to reset session
@gp :- "set multiplot layout 3,3; set key off" :-
cmaps = [:magma, :viridis, :plasma, :inferno, :berlin, :leonardo,
    :devon, :spring, :ice]
for i in 1:9
    @gp :- i title = "$(cmaps[i]), pt $(i)" "set size square" :-
    @gp(:-, rand(15), rand(15), rand(15), 
    "w p pt $(i) ps 3 lc palette", custom_palette(cmaps[i]), 
    "set cbtics out nomirror", "set xtics 0,1", "set ytics 0,1", 
    "set cbtics 0.0,0.2,1.0", xrange= (-0.1,1.1), 
    yrange= (-0.1,1.1), :-)
end
@gp</code></pre> <img src="/assets/menu1/code/plt_ex12.png" alt="">
<p>to be continued... 
<div class="page-foot">
  <div class="copyright">
    &copy; Lazaro Alonso. Last modified: March 20, 2020. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>.
  </div>
</div>

</div>
<!-- CONTENT ENDS HERE -->

      </div> <!-- closure of main -->
    </div>   <!-- closure of class initial--content -->

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
        <!-- end custom footer snippets -->
        <div class="page__footer-follow">
          <ul class="social-icons">
             <!--
            <li><strong>Follow:</strong></li>
            <li><a href="https://twitter.com/mmistakes" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
            -->
            <li><a href="https://github.com/gcalderone/Gnuplot.jl" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          </ul>
        </div>
        <div class="page__footer-copyright">&copy; Lazaro Alonso. Powered by <a href="https://github.com/tlienart/Franklin.jl">Franklin</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="/libs/minimal-mistakes/main.min.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>

    
        <script src="/libs/katex/katex.min.js"></script>
<script src="/libs/katex/auto-render.min.js"></script>
<script>renderMathInElement(document.body)</script>

    
    
        <script src="/libs/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script>

    
  </body>
</html>
